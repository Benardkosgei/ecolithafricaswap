{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport stationService from \"../services/stationService\";\nimport batteryService from \"../services/batteryService\";\nimport wasteService from \"../services/wasteService\";\nimport paymentService from \"../services/paymentService\";\nimport { useAuth } from \"./AuthContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar initialState = {\n  stations: [],\n  nearbyStations: [],\n  selectedStation: null,\n  batteries: [],\n  currentRental: null,\n  rentalHistory: [],\n  wasteHistory: [],\n  userCredits: {\n    available: 0,\n    pending: 0\n  },\n  wasteStats: null,\n  paymentHistory: [],\n  isLoading: {\n    stations: false,\n    batteries: false,\n    rentals: false,\n    waste: false,\n    payments: false\n  },\n  errors: {\n    stations: null,\n    batteries: null,\n    rentals: null,\n    waste: null,\n    payments: null\n  },\n  userLocation: null\n};\nvar DATA_ACTIONS = {\n  SET_LOADING: 'SET_LOADING',\n  SET_ERROR: 'SET_ERROR',\n  CLEAR_ERROR: 'CLEAR_ERROR',\n  SET_STATIONS: 'SET_STATIONS',\n  SET_NEARBY_STATIONS: 'SET_NEARBY_STATIONS',\n  SET_SELECTED_STATION: 'SET_SELECTED_STATION',\n  SET_BATTERIES: 'SET_BATTERIES',\n  SET_CURRENT_RENTAL: 'SET_CURRENT_RENTAL',\n  SET_RENTAL_HISTORY: 'SET_RENTAL_HISTORY',\n  SET_WASTE_HISTORY: 'SET_WASTE_HISTORY',\n  SET_USER_CREDITS: 'SET_USER_CREDITS',\n  SET_WASTE_STATS: 'SET_WASTE_STATS',\n  ADD_WASTE_SUBMISSION: 'ADD_WASTE_SUBMISSION',\n  SET_PAYMENT_HISTORY: 'SET_PAYMENT_HISTORY',\n  ADD_PAYMENT: 'ADD_PAYMENT',\n  SET_USER_LOCATION: 'SET_USER_LOCATION'\n};\nfunction dataReducer(state, action) {\n  switch (action.type) {\n    case DATA_ACTIONS.SET_LOADING:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: _objectSpread(_objectSpread({}, state.isLoading), {}, _defineProperty({}, action.payload.key, action.payload.isLoading))\n      });\n    case DATA_ACTIONS.SET_ERROR:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        errors: _objectSpread(_objectSpread({}, state.errors), {}, _defineProperty({}, action.payload.key, action.payload.error)),\n        isLoading: _objectSpread(_objectSpread({}, state.isLoading), {}, _defineProperty({}, action.payload.key, false))\n      });\n    case DATA_ACTIONS.CLEAR_ERROR:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        errors: _objectSpread(_objectSpread({}, state.errors), {}, _defineProperty({}, action.payload.key, null))\n      });\n    case DATA_ACTIONS.SET_STATIONS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        stations: action.payload.stations,\n        isLoading: _objectSpread(_objectSpread({}, state.isLoading), {}, {\n          stations: false\n        })\n      });\n    case DATA_ACTIONS.SET_NEARBY_STATIONS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        nearbyStations: action.payload.stations\n      });\n    case DATA_ACTIONS.SET_SELECTED_STATION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        selectedStation: action.payload.station\n      });\n    case DATA_ACTIONS.SET_BATTERIES:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        batteries: action.payload.batteries,\n        isLoading: _objectSpread(_objectSpread({}, state.isLoading), {}, {\n          batteries: false\n        })\n      });\n    case DATA_ACTIONS.SET_CURRENT_RENTAL:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        currentRental: action.payload.rental\n      });\n    case DATA_ACTIONS.SET_RENTAL_HISTORY:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        rentalHistory: action.payload.rentals,\n        isLoading: _objectSpread(_objectSpread({}, state.isLoading), {}, {\n          rentals: false\n        })\n      });\n    case DATA_ACTIONS.SET_WASTE_HISTORY:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        wasteHistory: action.payload.wasteHistory,\n        isLoading: _objectSpread(_objectSpread({}, state.isLoading), {}, {\n          waste: false\n        })\n      });\n    case DATA_ACTIONS.SET_USER_CREDITS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        userCredits: action.payload.credits\n      });\n    case DATA_ACTIONS.SET_WASTE_STATS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        wasteStats: action.payload.stats\n      });\n    case DATA_ACTIONS.ADD_WASTE_SUBMISSION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        wasteHistory: [action.payload.submission].concat(_toConsumableArray(state.wasteHistory)),\n        userCredits: _objectSpread(_objectSpread({}, state.userCredits), {}, {\n          pending: state.userCredits.pending + (action.payload.creditEarned || 0)\n        })\n      });\n    case DATA_ACTIONS.SET_PAYMENT_HISTORY:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        paymentHistory: action.payload.payments,\n        isLoading: _objectSpread(_objectSpread({}, state.isLoading), {}, {\n          payments: false\n        })\n      });\n    case DATA_ACTIONS.ADD_PAYMENT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        paymentHistory: [action.payload.payment].concat(_toConsumableArray(state.paymentHistory))\n      });\n    case DATA_ACTIONS.SET_USER_LOCATION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        userLocation: action.payload.location\n      });\n    default:\n      return state;\n  }\n}\nvar DataContext = createContext();\nexport function DataProvider(_ref) {\n  var children = _ref.children;\n  var _useReducer = useReducer(dataReducer, initialState),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    state = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  var _useAuth = useAuth(),\n    isAuthenticated = _useAuth.isAuthenticated,\n    user = _useAuth.user;\n  useEffect(function () {\n    if (isAuthenticated) {\n      loadInitialData();\n    }\n  }, [isAuthenticated]);\n  var handleAsync = function () {\n    var _ref2 = _asyncToGenerator(function* (key, asyncFunction) {\n      dispatch({\n        type: DATA_ACTIONS.SET_LOADING,\n        payload: {\n          key: key,\n          isLoading: true\n        }\n      });\n      dispatch({\n        type: DATA_ACTIONS.CLEAR_ERROR,\n        payload: {\n          key: key\n        }\n      });\n      try {\n        var result = yield asyncFunction();\n        return result;\n      } catch (error) {\n        dispatch({\n          type: DATA_ACTIONS.SET_ERROR,\n          payload: {\n            key: key,\n            error: error.message\n          }\n        });\n        throw error;\n      }\n    });\n    return function handleAsync(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var loadInitialData = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        yield Promise.all([loadStations(), loadCurrentRental(), loadUserCredits()]);\n      } catch (error) {\n        console.error('Error loading initial data:', error);\n      }\n    });\n    return function loadInitialData() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var loadStations = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      return handleAsync('stations', _asyncToGenerator(function* () {\n        var stations = yield stationService.getAllStations();\n        dispatch({\n          type: DATA_ACTIONS.SET_STATIONS,\n          payload: {\n            stations: stations\n          }\n        });\n        return stations;\n      }));\n    });\n    return function loadStations() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var loadNearbyStations = function () {\n    var _ref6 = _asyncToGenerator(function* (latitude, longitude) {\n      var radius = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      return handleAsync('stations', _asyncToGenerator(function* () {\n        var stations = yield stationService.getStationsNearLocation(latitude, longitude, radius);\n        var sortedStations = stationService.sortStationsByDistance(stations, latitude, longitude);\n        dispatch({\n          type: DATA_ACTIONS.SET_NEARBY_STATIONS,\n          payload: {\n            stations: sortedStations\n          }\n        });\n        return sortedStations;\n      }));\n    });\n    return function loadNearbyStations(_x3, _x4) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var selectStation = function selectStation(station) {\n    dispatch({\n      type: DATA_ACTIONS.SET_SELECTED_STATION,\n      payload: {\n        station: station\n      }\n    });\n  };\n  var loadBatteries = function () {\n    var _ref8 = _asyncToGenerator(function* () {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return handleAsync('batteries', _asyncToGenerator(function* () {\n        var batteries = yield batteryService.getAllBatteries(params);\n        dispatch({\n          type: DATA_ACTIONS.SET_BATTERIES,\n          payload: {\n            batteries: batteries\n          }\n        });\n        return batteries;\n      }));\n    });\n    return function loadBatteries() {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n  var loadCurrentRental = function () {\n    var _ref0 = _asyncToGenerator(function* () {\n      try {\n        var rental = yield batteryService.getCurrentRental();\n        dispatch({\n          type: DATA_ACTIONS.SET_CURRENT_RENTAL,\n          payload: {\n            rental: rental\n          }\n        });\n        return rental;\n      } catch (error) {\n        console.error('Error loading current rental:', error);\n        return null;\n      }\n    });\n    return function loadCurrentRental() {\n      return _ref0.apply(this, arguments);\n    };\n  }();\n  var loadRentalHistory = function () {\n    var _ref1 = _asyncToGenerator(function* () {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return handleAsync('rentals', _asyncToGenerator(function* () {\n        var rentals = yield batteryService.getRentalHistory(params);\n        dispatch({\n          type: DATA_ACTIONS.SET_RENTAL_HISTORY,\n          payload: {\n            rentals: rentals\n          }\n        });\n        return rentals;\n      }));\n    });\n    return function loadRentalHistory() {\n      return _ref1.apply(this, arguments);\n    };\n  }();\n  var rentBattery = function () {\n    var _ref11 = _asyncToGenerator(function* (batteryId, stationId) {\n      return handleAsync('rentals', _asyncToGenerator(function* () {\n        var response = yield batteryService.rentBattery(batteryId, stationId);\n        dispatch({\n          type: DATA_ACTIONS.SET_CURRENT_RENTAL,\n          payload: {\n            rental: response.rental\n          }\n        });\n        return response;\n      }));\n    });\n    return function rentBattery(_x5, _x6) {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n  var returnBattery = function () {\n    var _ref13 = _asyncToGenerator(function* (rentalId, stationId) {\n      return handleAsync('rentals', _asyncToGenerator(function* () {\n        var response = yield batteryService.returnBattery(rentalId, stationId);\n        dispatch({\n          type: DATA_ACTIONS.SET_CURRENT_RENTAL,\n          payload: {\n            rental: null\n          }\n        });\n        yield loadRentalHistory();\n        return response;\n      }));\n    });\n    return function returnBattery(_x7, _x8) {\n      return _ref13.apply(this, arguments);\n    };\n  }();\n  var loadWasteHistory = function () {\n    var _ref15 = _asyncToGenerator(function* () {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return handleAsync('waste', _asyncToGenerator(function* () {\n        var wasteHistory = yield wasteService.getWasteHistory(params);\n        dispatch({\n          type: DATA_ACTIONS.SET_WASTE_HISTORY,\n          payload: {\n            wasteHistory: wasteHistory\n          }\n        });\n        return wasteHistory;\n      }));\n    });\n    return function loadWasteHistory() {\n      return _ref15.apply(this, arguments);\n    };\n  }();\n  var submitWaste = function () {\n    var _ref17 = _asyncToGenerator(function* (wasteData) {\n      return handleAsync('waste', _asyncToGenerator(function* () {\n        var response = yield wasteService.submitWaste(wasteData);\n        dispatch({\n          type: DATA_ACTIONS.ADD_WASTE_SUBMISSION,\n          payload: {\n            submission: response.wasteLog,\n            creditEarned: response.creditEarned\n          }\n        });\n        return response;\n      }));\n    });\n    return function submitWaste(_x9) {\n      return _ref17.apply(this, arguments);\n    };\n  }();\n  var loadUserCredits = function () {\n    var _ref19 = _asyncToGenerator(function* () {\n      try {\n        if (user && user.profile) {\n          var credits = {\n            available: user.profile.available_credits || 0,\n            pending: user.profile.pending_credits || 0\n          };\n          dispatch({\n            type: DATA_ACTIONS.SET_USER_CREDITS,\n            payload: {\n              credits: credits\n            }\n          });\n          wasteService.setUserCredits(credits.available, credits.pending);\n          return credits;\n        }\n      } catch (error) {\n        console.error('Error loading user credits:', error);\n      }\n    });\n    return function loadUserCredits() {\n      return _ref19.apply(this, arguments);\n    };\n  }();\n  var loadWasteStats = function () {\n    var _ref20 = _asyncToGenerator(function* () {\n      try {\n        var stats = yield wasteService.getWasteStats();\n        dispatch({\n          type: DATA_ACTIONS.SET_WASTE_STATS,\n          payload: {\n            stats: stats\n          }\n        });\n        return stats;\n      } catch (error) {\n        console.error('Error loading waste stats:', error);\n        throw error;\n      }\n    });\n    return function loadWasteStats() {\n      return _ref20.apply(this, arguments);\n    };\n  }();\n  var loadPaymentHistory = function () {\n    var _ref21 = _asyncToGenerator(function* () {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return handleAsync('payments', _asyncToGenerator(function* () {\n        var payments = yield paymentService.getPaymentHistory(params);\n        dispatch({\n          type: DATA_ACTIONS.SET_PAYMENT_HISTORY,\n          payload: {\n            payments: payments\n          }\n        });\n        return payments;\n      }));\n    });\n    return function loadPaymentHistory() {\n      return _ref21.apply(this, arguments);\n    };\n  }();\n  var processPayment = function () {\n    var _ref23 = _asyncToGenerator(function* (paymentData, method) {\n      return handleAsync('payments', _asyncToGenerator(function* () {\n        var response;\n        if (method === 'mpesa') {\n          response = yield paymentService.processMPesaPayment(paymentData);\n        } else if (method === 'credits') {\n          response = yield paymentService.processCreditPayment(paymentData);\n        } else {\n          throw new Error('Unsupported payment method');\n        }\n        if (response.paymentId) {\n          yield loadPaymentHistory();\n        }\n        return response;\n      }));\n    });\n    return function processPayment(_x0, _x1) {\n      return _ref23.apply(this, arguments);\n    };\n  }();\n  var setUserLocation = function setUserLocation(latitude, longitude) {\n    var location = {\n      latitude: latitude,\n      longitude: longitude\n    };\n    dispatch({\n      type: DATA_ACTIONS.SET_USER_LOCATION,\n      payload: {\n        location: location\n      }\n    });\n    stationService.setCurrentLocation(latitude, longitude);\n  };\n  var clearError = function clearError(key) {\n    dispatch({\n      type: DATA_ACTIONS.CLEAR_ERROR,\n      payload: {\n        key: key\n      }\n    });\n  };\n  var value = _objectSpread(_objectSpread({}, state), {}, {\n    loadStations: loadStations,\n    loadNearbyStations: loadNearbyStations,\n    selectStation: selectStation,\n    loadBatteries: loadBatteries,\n    loadCurrentRental: loadCurrentRental,\n    loadRentalHistory: loadRentalHistory,\n    rentBattery: rentBattery,\n    returnBattery: returnBattery,\n    loadWasteHistory: loadWasteHistory,\n    submitWaste: submitWaste,\n    loadUserCredits: loadUserCredits,\n    loadWasteStats: loadWasteStats,\n    loadPaymentHistory: loadPaymentHistory,\n    processPayment: processPayment,\n    setUserLocation: setUserLocation,\n    clearError: clearError\n  });\n  return _jsx(DataContext.Provider, {\n    value: value,\n    children: children\n  });\n}\nexport function useData() {\n  var context = useContext(DataContext);\n  if (!context) {\n    throw new Error('useData must be used within a DataProvider');\n  }\n  return context;\n}\nexport default DataContext;","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","stationService","batteryService","wasteService","paymentService","useAuth","jsx","_jsx","initialState","stations","nearbyStations","selectedStation","batteries","currentRental","rentalHistory","wasteHistory","userCredits","available","pending","wasteStats","paymentHistory","isLoading","rentals","waste","payments","errors","userLocation","DATA_ACTIONS","SET_LOADING","SET_ERROR","CLEAR_ERROR","SET_STATIONS","SET_NEARBY_STATIONS","SET_SELECTED_STATION","SET_BATTERIES","SET_CURRENT_RENTAL","SET_RENTAL_HISTORY","SET_WASTE_HISTORY","SET_USER_CREDITS","SET_WASTE_STATS","ADD_WASTE_SUBMISSION","SET_PAYMENT_HISTORY","ADD_PAYMENT","SET_USER_LOCATION","dataReducer","state","action","type","_objectSpread","_defineProperty","payload","key","error","station","rental","credits","stats","submission","concat","_toConsumableArray","creditEarned","payment","location","DataContext","DataProvider","_ref","children","_useReducer","_useReducer2","_slicedToArray","dispatch","_useAuth","isAuthenticated","user","loadInitialData","handleAsync","_ref2","_asyncToGenerator","asyncFunction","result","message","_x","_x2","apply","arguments","_ref3","Promise","all","loadStations","loadCurrentRental","loadUserCredits","console","_ref4","getAllStations","loadNearbyStations","_ref6","latitude","longitude","radius","length","undefined","getStationsNearLocation","sortedStations","sortStationsByDistance","_x3","_x4","selectStation","loadBatteries","_ref8","params","getAllBatteries","_ref0","getCurrentRental","loadRentalHistory","_ref1","getRentalHistory","rentBattery","_ref11","batteryId","stationId","response","_x5","_x6","returnBattery","_ref13","rentalId","_x7","_x8","loadWasteHistory","_ref15","getWasteHistory","submitWaste","_ref17","wasteData","wasteLog","_x9","_ref19","profile","available_credits","pending_credits","setUserCredits","loadWasteStats","_ref20","getWasteStats","loadPaymentHistory","_ref21","getPaymentHistory","processPayment","_ref23","paymentData","method","processMPesaPayment","processCreditPayment","Error","paymentId","_x0","_x1","setUserLocation","setCurrentLocation","clearError","value","Provider","useData","context"],"sources":["C:/Users/User/Desktop/Ecolith Promps/V3/EcolithSwap/src/contexts/DataContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport stationService from '../services/stationService';\nimport batteryService from '../services/batteryService';\nimport wasteService from '../services/wasteService';\nimport paymentService from '../services/paymentService';\nimport { useAuth } from './AuthContext';\n\n// Initial state\nconst initialState = {\n  // Stations\n  stations: [],\n  nearbyStations: [],\n  selectedStation: null,\n  \n  // Batteries\n  batteries: [],\n  currentRental: null,\n  rentalHistory: [],\n  \n  // Waste\n  wasteHistory: [],\n  userCredits: { available: 0, pending: 0 },\n  wasteStats: null,\n  \n  // Payments\n  paymentHistory: [],\n  \n  // UI State\n  isLoading: {\n    stations: false,\n    batteries: false,\n    rentals: false,\n    waste: false,\n    payments: false,\n  },\n  \n  errors: {\n    stations: null,\n    batteries: null,\n    rentals: null,\n    waste: null,\n    payments: null,\n  },\n  \n  // User location\n  userLocation: null,\n};\n\n// Action types\nconst DATA_ACTIONS = {\n  // Loading states\n  SET_LOADING: 'SET_LOADING',\n  SET_ERROR: 'SET_ERROR',\n  CLEAR_ERROR: 'CLEAR_ERROR',\n  \n  // Stations\n  SET_STATIONS: 'SET_STATIONS',\n  SET_NEARBY_STATIONS: 'SET_NEARBY_STATIONS',\n  SET_SELECTED_STATION: 'SET_SELECTED_STATION',\n  \n  // Batteries\n  SET_BATTERIES: 'SET_BATTERIES',\n  SET_CURRENT_RENTAL: 'SET_CURRENT_RENTAL',\n  SET_RENTAL_HISTORY: 'SET_RENTAL_HISTORY',\n  \n  // Waste\n  SET_WASTE_HISTORY: 'SET_WASTE_HISTORY',\n  SET_USER_CREDITS: 'SET_USER_CREDITS',\n  SET_WASTE_STATS: 'SET_WASTE_STATS',\n  ADD_WASTE_SUBMISSION: 'ADD_WASTE_SUBMISSION',\n  \n  // Payments\n  SET_PAYMENT_HISTORY: 'SET_PAYMENT_HISTORY',\n  ADD_PAYMENT: 'ADD_PAYMENT',\n  \n  // Location\n  SET_USER_LOCATION: 'SET_USER_LOCATION',\n};\n\n// Reducer\nfunction dataReducer(state, action) {\n  switch (action.type) {\n    case DATA_ACTIONS.SET_LOADING:\n      return {\n        ...state,\n        isLoading: {\n          ...state.isLoading,\n          [action.payload.key]: action.payload.isLoading,\n        },\n      };\n    \n    case DATA_ACTIONS.SET_ERROR:\n      return {\n        ...state,\n        errors: {\n          ...state.errors,\n          [action.payload.key]: action.payload.error,\n        },\n        isLoading: {\n          ...state.isLoading,\n          [action.payload.key]: false,\n        },\n      };\n    \n    case DATA_ACTIONS.CLEAR_ERROR:\n      return {\n        ...state,\n        errors: {\n          ...state.errors,\n          [action.payload.key]: null,\n        },\n      };\n    \n    case DATA_ACTIONS.SET_STATIONS:\n      return {\n        ...state,\n        stations: action.payload.stations,\n        isLoading: { ...state.isLoading, stations: false },\n      };\n    \n    case DATA_ACTIONS.SET_NEARBY_STATIONS:\n      return {\n        ...state,\n        nearbyStations: action.payload.stations,\n      };\n    \n    case DATA_ACTIONS.SET_SELECTED_STATION:\n      return {\n        ...state,\n        selectedStation: action.payload.station,\n      };\n    \n    case DATA_ACTIONS.SET_BATTERIES:\n      return {\n        ...state,\n        batteries: action.payload.batteries,\n        isLoading: { ...state.isLoading, batteries: false },\n      };\n    \n    case DATA_ACTIONS.SET_CURRENT_RENTAL:\n      return {\n        ...state,\n        currentRental: action.payload.rental,\n      };\n    \n    case DATA_ACTIONS.SET_RENTAL_HISTORY:\n      return {\n        ...state,\n        rentalHistory: action.payload.rentals,\n        isLoading: { ...state.isLoading, rentals: false },\n      };\n    \n    case DATA_ACTIONS.SET_WASTE_HISTORY:\n      return {\n        ...state,\n        wasteHistory: action.payload.wasteHistory,\n        isLoading: { ...state.isLoading, waste: false },\n      };\n    \n    case DATA_ACTIONS.SET_USER_CREDITS:\n      return {\n        ...state,\n        userCredits: action.payload.credits,\n      };\n    \n    case DATA_ACTIONS.SET_WASTE_STATS:\n      return {\n        ...state,\n        wasteStats: action.payload.stats,\n      };\n    \n    case DATA_ACTIONS.ADD_WASTE_SUBMISSION:\n      return {\n        ...state,\n        wasteHistory: [action.payload.submission, ...state.wasteHistory],\n        userCredits: {\n          ...state.userCredits,\n          pending: state.userCredits.pending + (action.payload.creditEarned || 0),\n        },\n      };\n    \n    case DATA_ACTIONS.SET_PAYMENT_HISTORY:\n      return {\n        ...state,\n        paymentHistory: action.payload.payments,\n        isLoading: { ...state.isLoading, payments: false },\n      };\n    \n    case DATA_ACTIONS.ADD_PAYMENT:\n      return {\n        ...state,\n        paymentHistory: [action.payload.payment, ...state.paymentHistory],\n      };\n    \n    case DATA_ACTIONS.SET_USER_LOCATION:\n      return {\n        ...state,\n        userLocation: action.payload.location,\n      };\n    \n    default:\n      return state;\n  }\n}\n\n// Create context\nconst DataContext = createContext();\n\n// Data Provider component\nexport function DataProvider({ children }) {\n  const [state, dispatch] = useReducer(dataReducer, initialState);\n  const { isAuthenticated, user } = useAuth();\n\n  // Load initial data when user is authenticated\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadInitialData();\n    }\n  }, [isAuthenticated]);\n\n  // Helper function to handle async operations\n  const handleAsync = async (key, asyncFunction) => {\n    dispatch({ type: DATA_ACTIONS.SET_LOADING, payload: { key, isLoading: true } });\n    dispatch({ type: DATA_ACTIONS.CLEAR_ERROR, payload: { key } });\n    \n    try {\n      const result = await asyncFunction();\n      return result;\n    } catch (error) {\n      dispatch({\n        type: DATA_ACTIONS.SET_ERROR,\n        payload: { key, error: error.message },\n      });\n      throw error;\n    }\n  };\n\n  // Load initial data\n  const loadInitialData = async () => {\n    try {\n      await Promise.all([\n        loadStations(),\n        loadCurrentRental(),\n        loadUserCredits(),\n      ]);\n    } catch (error) {\n      console.error('Error loading initial data:', error);\n    }\n  };\n\n  // Stations\n  const loadStations = async () => {\n    return handleAsync('stations', async () => {\n      const stations = await stationService.getAllStations();\n      dispatch({ type: DATA_ACTIONS.SET_STATIONS, payload: { stations } });\n      return stations;\n    });\n  };\n\n  const loadNearbyStations = async (latitude, longitude, radius = 10) => {\n    return handleAsync('stations', async () => {\n      const stations = await stationService.getStationsNearLocation(latitude, longitude, radius);\n      const sortedStations = stationService.sortStationsByDistance(stations, latitude, longitude);\n      dispatch({ type: DATA_ACTIONS.SET_NEARBY_STATIONS, payload: { stations: sortedStations } });\n      return sortedStations;\n    });\n  };\n\n  const selectStation = (station) => {\n    dispatch({ type: DATA_ACTIONS.SET_SELECTED_STATION, payload: { station } });\n  };\n\n  // Batteries\n  const loadBatteries = async (params = {}) => {\n    return handleAsync('batteries', async () => {\n      const batteries = await batteryService.getAllBatteries(params);\n      dispatch({ type: DATA_ACTIONS.SET_BATTERIES, payload: { batteries } });\n      return batteries;\n    });\n  };\n\n  const loadCurrentRental = async () => {\n    try {\n      const rental = await batteryService.getCurrentRental();\n      dispatch({ type: DATA_ACTIONS.SET_CURRENT_RENTAL, payload: { rental } });\n      return rental;\n    } catch (error) {\n      console.error('Error loading current rental:', error);\n      return null;\n    }\n  };\n\n  const loadRentalHistory = async (params = {}) => {\n    return handleAsync('rentals', async () => {\n      const rentals = await batteryService.getRentalHistory(params);\n      dispatch({ type: DATA_ACTIONS.SET_RENTAL_HISTORY, payload: { rentals } });\n      return rentals;\n    });\n  };\n\n  const rentBattery = async (batteryId, stationId) => {\n    return handleAsync('rentals', async () => {\n      const response = await batteryService.rentBattery(batteryId, stationId);\n      dispatch({ type: DATA_ACTIONS.SET_CURRENT_RENTAL, payload: { rental: response.rental } });\n      return response;\n    });\n  };\n\n  const returnBattery = async (rentalId, stationId) => {\n    return handleAsync('rentals', async () => {\n      const response = await batteryService.returnBattery(rentalId, stationId);\n      dispatch({ type: DATA_ACTIONS.SET_CURRENT_RENTAL, payload: { rental: null } });\n      \n      // Reload rental history\n      await loadRentalHistory();\n      \n      return response;\n    });\n  };\n\n  // Waste\n  const loadWasteHistory = async (params = {}) => {\n    return handleAsync('waste', async () => {\n      const wasteHistory = await wasteService.getWasteHistory(params);\n      dispatch({ type: DATA_ACTIONS.SET_WASTE_HISTORY, payload: { wasteHistory } });\n      return wasteHistory;\n    });\n  };\n\n  const submitWaste = async (wasteData) => {\n    return handleAsync('waste', async () => {\n      const response = await wasteService.submitWaste(wasteData);\n      \n      dispatch({\n        type: DATA_ACTIONS.ADD_WASTE_SUBMISSION,\n        payload: {\n          submission: response.wasteLog,\n          creditEarned: response.creditEarned,\n        },\n      });\n      \n      return response;\n    });\n  };\n\n  const loadUserCredits = async () => {\n    try {\n      if (user && user.profile) {\n        const credits = {\n          available: user.profile.available_credits || 0,\n          pending: user.profile.pending_credits || 0,\n        };\n        \n        dispatch({ type: DATA_ACTIONS.SET_USER_CREDITS, payload: { credits } });\n        wasteService.setUserCredits(credits.available, credits.pending);\n        \n        return credits;\n      }\n    } catch (error) {\n      console.error('Error loading user credits:', error);\n    }\n  };\n\n  const loadWasteStats = async () => {\n    try {\n      const stats = await wasteService.getWasteStats();\n      dispatch({ type: DATA_ACTIONS.SET_WASTE_STATS, payload: { stats } });\n      return stats;\n    } catch (error) {\n      console.error('Error loading waste stats:', error);\n      throw error;\n    }\n  };\n\n  // Payments\n  const loadPaymentHistory = async (params = {}) => {\n    return handleAsync('payments', async () => {\n      const payments = await paymentService.getPaymentHistory(params);\n      dispatch({ type: DATA_ACTIONS.SET_PAYMENT_HISTORY, payload: { payments } });\n      return payments;\n    });\n  };\n\n  const processPayment = async (paymentData, method) => {\n    return handleAsync('payments', async () => {\n      let response;\n      \n      if (method === 'mpesa') {\n        response = await paymentService.processMPesaPayment(paymentData);\n      } else if (method === 'credits') {\n        response = await paymentService.processCreditPayment(paymentData);\n      } else {\n        throw new Error('Unsupported payment method');\n      }\n      \n      // Add to payment history if successful\n      if (response.paymentId) {\n        // Reload payment history to get updated data\n        await loadPaymentHistory();\n      }\n      \n      return response;\n    });\n  };\n\n  // Location\n  const setUserLocation = (latitude, longitude) => {\n    const location = { latitude, longitude };\n    dispatch({ type: DATA_ACTIONS.SET_USER_LOCATION, payload: { location } });\n    stationService.setCurrentLocation(latitude, longitude);\n  };\n\n  // Clear errors\n  const clearError = (key) => {\n    dispatch({ type: DATA_ACTIONS.CLEAR_ERROR, payload: { key } });\n  };\n\n  // Context value\n  const value = {\n    // State\n    ...state,\n    \n    // Actions - Stations\n    loadStations,\n    loadNearbyStations,\n    selectStation,\n    \n    // Actions - Batteries\n    loadBatteries,\n    loadCurrentRental,\n    loadRentalHistory,\n    rentBattery,\n    returnBattery,\n    \n    // Actions - Waste\n    loadWasteHistory,\n    submitWaste,\n    loadUserCredits,\n    loadWasteStats,\n    \n    // Actions - Payments\n    loadPaymentHistory,\n    processPayment,\n    \n    // Actions - Location\n    setUserLocation,\n    \n    // Utilities\n    clearError,\n  };\n\n  return (\n    <DataContext.Provider value={value}>\n      {children}\n    </DataContext.Provider>\n  );\n}\n\n// Custom hook to use data context\nexport function useData() {\n  const context = useContext(DataContext);\n  \n  if (!context) {\n    throw new Error('useData must be used within a DataProvider');\n  }\n  \n  return context;\n}\n\nexport default DataContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}