{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Vibration from \"react-native-web/dist/exports/Vibration\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport { Camera } from 'expo-camera';\nimport { BarCodeScanner } from 'expo-barcode-scanner';\nimport { Button, ActivityIndicator, FAB } from 'react-native-paper';\nimport Icon from \"@expo/vector-icons/MaterialIcons\";\nimport { useData } from \"../contexts/DataContext\";\nimport { colors, typography, spacing } from \"../utils/theme\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function QRScannerScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useData = useData(),\n    initiateBatterySwap = _useData.initiateBatterySwap,\n    completeBatteryReturn = _useData.completeBatteryReturn,\n    activeRental = _useData.activeRental,\n    isOnline = _useData.isOnline;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasPermission = _useState2[0],\n    setHasPermission = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    scanned = _useState4[0],\n    setScanned = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    processing = _useState6[0],\n    setProcessing = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    flashOn = _useState8[0],\n    setFlashOn = _useState8[1];\n  useEffect(function () {\n    getCameraPermissions();\n    var backHandler = BackHandler.addEventListener('hardwareBackPress', handleBackPress);\n    return function () {\n      return backHandler.remove();\n    };\n  }, []);\n  var getCameraPermissions = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var _yield$Camera$request = yield Camera.requestCameraPermissionsAsync(),\n        status = _yield$Camera$request.status;\n      setHasPermission(status === 'granted');\n    });\n    return function getCameraPermissions() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleBackPress = function handleBackPress() {\n    if (processing) {\n      return true;\n    }\n    navigation.goBack();\n    return true;\n  };\n  var handleBarCodeScanned = function () {\n    var _ref4 = _asyncToGenerator(function* (_ref3) {\n      var type = _ref3.type,\n        data = _ref3.data;\n      if (scanned || processing) return;\n      setScanned(true);\n      setProcessing(true);\n      Vibration.vibrate(100);\n      try {\n        var qrData = JSON.parse(data);\n        if (!qrData.stationId || !qrData.batteryId) {\n          throw new Error('Invalid QR code format');\n        }\n        if (activeRental) {\n          yield handleBatteryReturn(qrData);\n        } else {\n          yield handleBatterySwap(qrData);\n        }\n      } catch (error) {\n        console.error('QR scan error:', error);\n        Alert.alert('Scan Error', error.message || 'Invalid QR code. Please try again.', [{\n          text: 'Try Again',\n          onPress: function onPress() {\n            setScanned(false);\n            setProcessing(false);\n          }\n        }, {\n          text: 'Cancel',\n          onPress: function onPress() {\n            return navigation.goBack();\n          }\n        }]);\n      }\n    });\n    return function handleBarCodeScanned(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var handleBatterySwap = function () {\n    var _ref5 = _asyncToGenerator(function* (qrData) {\n      try {\n        var result = yield initiateBatterySwap(qrData.stationId, qrData.batteryId);\n        if (result.success) {\n          Alert.alert('Battery Swap Initiated', result.offline ? 'Swap recorded offline. Will sync when connection is restored.' : 'Battery swap started successfully!', [{\n            text: 'Continue',\n            onPress: function onPress() {\n              navigation.navigate('Payment', {\n                rental: result.rental,\n                offline: result.offline\n              });\n            }\n          }]);\n        } else {\n          throw new Error(result.error);\n        }\n      } catch (error) {\n        throw error;\n      } finally {\n        setProcessing(false);\n      }\n    });\n    return function handleBatterySwap(_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var handleBatteryReturn = function () {\n    var _ref6 = _asyncToGenerator(function* (qrData) {\n      try {\n        Alert.alert('Return Battery', `Are you sure you want to return your battery to ${qrData.stationName || 'this station'}?`, [{\n          text: 'Cancel',\n          onPress: function onPress() {\n            setScanned(false);\n            setProcessing(false);\n          }\n        }, {\n          text: 'Return',\n          onPress: function () {\n            var _onPress = _asyncToGenerator(function* () {\n              try {\n                var result = yield completeBatteryReturn(qrData.stationId);\n                if (result.success) {\n                  Alert.alert('Battery Returned', result.offline ? 'Return recorded offline. Will sync when connection is restored.' : `Battery returned successfully!\\\\n\\\\nTotal Cost: KES ${result.totalCost}\\\\nDuration: ${result.durationHours} hours`, [{\n                    text: 'Done',\n                    onPress: function onPress() {\n                      return navigation.navigate('HomeTab');\n                    }\n                  }]);\n                } else {\n                  throw new Error(result.error);\n                }\n              } catch (error) {\n                Alert.alert('Return Error', error.message);\n                setScanned(false);\n                setProcessing(false);\n              }\n            });\n            function onPress() {\n              return _onPress.apply(this, arguments);\n            }\n            return onPress;\n          }()\n        }]);\n      } catch (error) {\n        throw error;\n      }\n    });\n    return function handleBatteryReturn(_x3) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var toggleFlash = function toggleFlash() {\n    setFlashOn(!flashOn);\n  };\n  var resetScanner = function resetScanner() {\n    setScanned(false);\n    setProcessing(false);\n  };\n  if (hasPermission === null) {\n    return _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(ActivityIndicator, {\n        size: \"large\",\n        color: colors.primary\n      }), _jsx(Text, {\n        style: styles.permissionText,\n        children: \"Requesting camera permission...\"\n      })]\n    });\n  }\n  if (hasPermission === false) {\n    return _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(Icon, {\n        name: \"camera-alt\",\n        size: 64,\n        color: colors.textSecondary\n      }), _jsx(Text, {\n        style: styles.permissionText,\n        children: \"No access to camera\"\n      }), _jsx(Text, {\n        style: styles.permissionSubtext,\n        children: \"Camera permission is required to scan QR codes\"\n      }), _jsx(Button, {\n        mode: \"contained\",\n        onPress: getCameraPermissions,\n        style: styles.permissionButton,\n        children: \"Grant Permission\"\n      })]\n    });\n  }\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(Camera, {\n      style: styles.camera,\n      type: Camera.Constants.Type.back,\n      flashMode: flashOn ? Camera.Constants.FlashMode.torch : Camera.Constants.FlashMode.off,\n      onBarCodeScanned: scanned ? undefined : handleBarCodeScanned,\n      barCodeScannerSettings: {\n        barCodeTypes: [BarCodeScanner.Constants.BarCodeType.qr]\n      },\n      children: _jsxs(View, {\n        style: styles.overlay,\n        children: [_jsxs(View, {\n          style: styles.header,\n          children: [_jsx(FAB, {\n            style: styles.backButton,\n            icon: \"arrow-left\",\n            size: \"small\",\n            onPress: function onPress() {\n              return navigation.goBack();\n            },\n            disabled: processing\n          }), _jsxs(View, {\n            style: styles.headerCenter,\n            children: [_jsx(Text, {\n              style: styles.headerTitle,\n              children: activeRental ? 'Return Battery' : 'Scan for Battery Swap'\n            }), _jsx(Text, {\n              style: styles.headerSubtitle,\n              children: isOnline ? 'Online' : 'Offline Mode'\n            })]\n          }), _jsx(FAB, {\n            style: styles.flashButton,\n            icon: flashOn ? 'flash-off' : 'flash-on',\n            size: \"small\",\n            onPress: toggleFlash,\n            disabled: processing\n          })]\n        }), _jsx(View, {\n          style: styles.scanningFrame,\n          children: _jsxs(View, {\n            style: styles.frame,\n            children: [_jsx(View, {\n              style: [styles.corner, styles.topLeft]\n            }), _jsx(View, {\n              style: [styles.corner, styles.topRight]\n            }), _jsx(View, {\n              style: [styles.corner, styles.bottomLeft]\n            }), _jsx(View, {\n              style: [styles.corner, styles.bottomRight]\n            }), processing && _jsxs(View, {\n              style: styles.processingOverlay,\n              children: [_jsx(ActivityIndicator, {\n                size: \"large\",\n                color: \"white\"\n              }), _jsx(Text, {\n                style: styles.processingText,\n                children: \"Processing...\"\n              })]\n            })]\n          })\n        }), _jsxs(View, {\n          style: styles.instructions,\n          children: [_jsx(Text, {\n            style: styles.instructionTitle,\n            children: activeRental ? 'Scan station QR to return battery' : 'Scan battery QR code to start rental'\n          }), _jsx(Text, {\n            style: styles.instructionText,\n            children: \"Position the QR code within the frame above\"\n          }), !isOnline && _jsxs(View, {\n            style: styles.offlineWarning,\n            children: [_jsx(Icon, {\n              name: \"wifi-off\",\n              size: 16,\n              color: colors.warning\n            }), _jsx(Text, {\n              style: styles.offlineText,\n              children: \"Offline mode: Actions will sync when connected\"\n            })]\n          })]\n        }), _jsxs(View, {\n          style: styles.actionButtons,\n          children: [scanned && !processing && _jsx(Button, {\n            mode: \"outlined\",\n            onPress: resetScanner,\n            style: styles.actionButton,\n            labelStyle: styles.actionButtonLabel,\n            children: \"Scan Again\"\n          }), _jsx(Button, {\n            mode: \"text\",\n            onPress: function onPress() {\n              return navigation.goBack();\n            },\n            disabled: processing,\n            style: styles.actionButton,\n            labelStyle: styles.actionButtonLabel,\n            children: \"Cancel\"\n          })]\n        })]\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  camera: {\n    flex: 1,\n    width: '100%'\n  },\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.3)'\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingTop: spacing.xl,\n    paddingHorizontal: spacing.md,\n    paddingBottom: spacing.lg\n  },\n  backButton: {\n    backgroundColor: 'rgba(255, 255, 255, 0.9)'\n  },\n  headerCenter: {\n    flex: 1,\n    alignItems: 'center'\n  },\n  headerTitle: _objectSpread(_objectSpread({}, typography.h3), {}, {\n    color: 'white',\n    textAlign: 'center'\n  }),\n  headerSubtitle: _objectSpread(_objectSpread({}, typography.caption), {}, {\n    color: 'rgba(255, 255, 255, 0.8)',\n    marginTop: spacing.xs\n  }),\n  flashButton: {\n    backgroundColor: 'rgba(255, 255, 255, 0.9)'\n  },\n  scanningFrame: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  frame: {\n    width: 250,\n    height: 250,\n    position: 'relative'\n  },\n  corner: {\n    position: 'absolute',\n    width: 30,\n    height: 30,\n    borderWidth: 4,\n    borderColor: 'white'\n  },\n  topLeft: {\n    top: 0,\n    left: 0,\n    borderRightWidth: 0,\n    borderBottomWidth: 0\n  },\n  topRight: {\n    top: 0,\n    right: 0,\n    borderLeftWidth: 0,\n    borderBottomWidth: 0\n  },\n  bottomLeft: {\n    bottom: 0,\n    left: 0,\n    borderRightWidth: 0,\n    borderTopWidth: 0\n  },\n  bottomRight: {\n    bottom: 0,\n    right: 0,\n    borderLeftWidth: 0,\n    borderTopWidth: 0\n  },\n  processingOverlay: _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    justifyContent: 'center',\n    alignItems: 'center'\n  }),\n  processingText: _objectSpread(_objectSpread({}, typography.body), {}, {\n    color: 'white',\n    marginTop: spacing.md\n  }),\n  instructions: {\n    paddingHorizontal: spacing.xl,\n    paddingVertical: spacing.lg,\n    alignItems: 'center'\n  },\n  instructionTitle: _objectSpread(_objectSpread({}, typography.h3), {}, {\n    color: 'white',\n    textAlign: 'center',\n    marginBottom: spacing.sm\n  }),\n  instructionText: _objectSpread(_objectSpread({}, typography.body), {}, {\n    color: 'rgba(255, 255, 255, 0.8)',\n    textAlign: 'center'\n  }),\n  offlineWarning: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginTop: spacing.md,\n    paddingHorizontal: spacing.md,\n    paddingVertical: spacing.sm,\n    backgroundColor: 'rgba(255, 152, 0, 0.2)',\n    borderRadius: 8,\n    gap: spacing.sm\n  },\n  offlineText: _objectSpread(_objectSpread({}, typography.caption), {}, {\n    color: colors.warning\n  }),\n  actionButtons: {\n    paddingHorizontal: spacing.xl,\n    paddingBottom: spacing.xl,\n    gap: spacing.md\n  },\n  actionButton: {\n    borderColor: 'white'\n  },\n  actionButtonLabel: {\n    color: 'white'\n  },\n  permissionText: _objectSpread(_objectSpread({}, typography.h3), {}, {\n    marginTop: spacing.lg,\n    marginBottom: spacing.sm,\n    textAlign: 'center',\n    color: colors.textSecondary\n  }),\n  permissionSubtext: _objectSpread(_objectSpread({}, typography.body), {}, {\n    textAlign: 'center',\n    color: colors.textSecondary,\n    marginBottom: spacing.xl,\n    paddingHorizontal: spacing.xl\n  }),\n  permissionButton: {\n    backgroundColor: colors.primary\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","Alert","Vibration","BackHandler","Camera","BarCodeScanner","Button","ActivityIndicator","FAB","Icon","useData","colors","typography","spacing","jsx","_jsx","jsxs","_jsxs","QRScannerScreen","_ref","navigation","_useData","initiateBatterySwap","completeBatteryReturn","activeRental","isOnline","_useState","_useState2","_slicedToArray","hasPermission","setHasPermission","_useState3","_useState4","scanned","setScanned","_useState5","_useState6","processing","setProcessing","_useState7","_useState8","flashOn","setFlashOn","getCameraPermissions","backHandler","addEventListener","handleBackPress","remove","_ref2","_asyncToGenerator","_yield$Camera$request","requestCameraPermissionsAsync","status","apply","arguments","goBack","handleBarCodeScanned","_ref4","_ref3","type","data","vibrate","qrData","JSON","parse","stationId","batteryId","Error","handleBatteryReturn","handleBatterySwap","error","console","alert","message","text","onPress","_x","_ref5","result","success","offline","navigate","rental","_x2","_ref6","stationName","_onPress","totalCost","durationHours","_x3","toggleFlash","resetScanner","style","styles","container","children","size","color","primary","permissionText","name","textSecondary","permissionSubtext","mode","permissionButton","camera","Constants","Type","back","flashMode","FlashMode","torch","off","onBarCodeScanned","undefined","barCodeScannerSettings","barCodeTypes","BarCodeType","qr","overlay","header","backButton","icon","disabled","headerCenter","headerTitle","headerSubtitle","flashButton","scanningFrame","frame","corner","topLeft","topRight","bottomLeft","bottomRight","processingOverlay","processingText","instructions","instructionTitle","instructionText","offlineWarning","warning","offlineText","actionButtons","actionButton","labelStyle","actionButtonLabel","create","flex","backgroundColor","background","justifyContent","alignItems","width","flexDirection","paddingTop","xl","paddingHorizontal","md","paddingBottom","lg","_objectSpread","h3","textAlign","caption","marginTop","xs","height","position","borderWidth","borderColor","top","left","borderRightWidth","borderBottomWidth","right","borderLeftWidth","bottom","borderTopWidth","absoluteFillObject","body","paddingVertical","marginBottom","sm","borderRadius","gap"],"sources":["C:/Users/User/Desktop/Ecolith Promps/V3/EcolithSwap/src/screens/QRScannerScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Alert,\n  Vibration,\n  BackHandler,\n} from 'react-native';\nimport { Camera } from 'expo-camera';\nimport { BarCodeScanner } from 'expo-barcode-scanner';\nimport { Button, ActivityIndicator, FAB } from 'react-native-paper';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { useData } from '../contexts/DataContext';\nimport { colors, typography, spacing } from '../utils/theme';\n\nexport default function QRScannerScreen({ navigation }) {\n  const { initiateBatterySwap, completeBatteryReturn, activeRental, isOnline } = useData();\n  const [hasPermission, setHasPermission] = useState(null);\n  const [scanned, setScanned] = useState(false);\n  const [processing, setProcessing] = useState(false);\n  const [flashOn, setFlashOn] = useState(false);\n\n  useEffect(() => {\n    getCameraPermissions();\n    \n    // Handle back button\n    const backHandler = BackHandler.addEventListener('hardwareBackPress', handleBackPress);\n    return () => backHandler.remove();\n  }, []);\n\n  const getCameraPermissions = async () => {\n    const { status } = await Camera.requestCameraPermissionsAsync();\n    setHasPermission(status === 'granted');\n  };\n\n  const handleBackPress = () => {\n    if (processing) {\n      // Don't allow back during processing\n      return true;\n    }\n    navigation.goBack();\n    return true;\n  };\n\n  const handleBarCodeScanned = async ({ type, data }) => {\n    if (scanned || processing) return;\n    \n    setScanned(true);\n    setProcessing(true);\n    Vibration.vibrate(100);\n\n    try {\n      // Parse QR code data\n      const qrData = JSON.parse(data);\n      \n      if (!qrData.stationId || !qrData.batteryId) {\n        throw new Error('Invalid QR code format');\n      }\n\n      // Determine action based on current state\n      if (activeRental) {\n        // User has active rental - this should be a return\n        await handleBatteryReturn(qrData);\n      } else {\n        // User doesn't have active rental - this should be a swap\n        await handleBatterySwap(qrData);\n      }\n    } catch (error) {\n      console.error('QR scan error:', error);\n      Alert.alert(\n        'Scan Error',\n        error.message || 'Invalid QR code. Please try again.',\n        [\n          {\n            text: 'Try Again',\n            onPress: () => {\n              setScanned(false);\n              setProcessing(false);\n            },\n          },\n          {\n            text: 'Cancel',\n            onPress: () => navigation.goBack(),\n          },\n        ]\n      );\n    }\n  };\n\n  const handleBatterySwap = async (qrData) => {\n    try {\n      const result = await initiateBatterySwap(qrData.stationId, qrData.batteryId);\n      \n      if (result.success) {\n        Alert.alert(\n          'Battery Swap Initiated',\n          result.offline \n            ? 'Swap recorded offline. Will sync when connection is restored.'\n            : 'Battery swap started successfully!',\n          [\n            {\n              text: 'Continue',\n              onPress: () => {\n                navigation.navigate('Payment', { \n                  rental: result.rental,\n                  offline: result.offline \n                });\n              },\n            },\n          ]\n        );\n      } else {\n        throw new Error(result.error);\n      }\n    } catch (error) {\n      throw error;\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  const handleBatteryReturn = async (qrData) => {\n    try {\n      // Confirm return action\n      Alert.alert(\n        'Return Battery',\n        `Are you sure you want to return your battery to ${qrData.stationName || 'this station'}?`,\n        [\n          {\n            text: 'Cancel',\n            onPress: () => {\n              setScanned(false);\n              setProcessing(false);\n            },\n          },\n          {\n            text: 'Return',\n            onPress: async () => {\n              try {\n                const result = await completeBatteryReturn(qrData.stationId);\n                \n                if (result.success) {\n                  Alert.alert(\n                    'Battery Returned',\n                    result.offline\n                      ? 'Return recorded offline. Will sync when connection is restored.'\n                      : `Battery returned successfully!\\\\n\\\\nTotal Cost: KES ${result.totalCost}\\\\nDuration: ${result.durationHours} hours`,\n                    [\n                      {\n                        text: 'Done',\n                        onPress: () => navigation.navigate('HomeTab'),\n                      },\n                    ]\n                  );\n                } else {\n                  throw new Error(result.error);\n                }\n              } catch (error) {\n                Alert.alert('Return Error', error.message);\n                setScanned(false);\n                setProcessing(false);\n              }\n            },\n          },\n        ]\n      );\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  const toggleFlash = () => {\n    setFlashOn(!flashOn);\n  };\n\n  const resetScanner = () => {\n    setScanned(false);\n    setProcessing(false);\n  };\n\n  if (hasPermission === null) {\n    return (\n      <View style={styles.container}>\n        <ActivityIndicator size=\"large\" color={colors.primary} />\n        <Text style={styles.permissionText}>Requesting camera permission...</Text>\n      </View>\n    );\n  }\n\n  if (hasPermission === false) {\n    return (\n      <View style={styles.container}>\n        <Icon name=\"camera-alt\" size={64} color={colors.textSecondary} />\n        <Text style={styles.permissionText}>No access to camera</Text>\n        <Text style={styles.permissionSubtext}>\n          Camera permission is required to scan QR codes\n        </Text>\n        <Button\n          mode=\"contained\"\n          onPress={getCameraPermissions}\n          style={styles.permissionButton}\n        >\n          Grant Permission\n        </Button>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <Camera\n        style={styles.camera}\n        type={Camera.Constants.Type.back}\n        flashMode={flashOn ? Camera.Constants.FlashMode.torch : Camera.Constants.FlashMode.off}\n        onBarCodeScanned={scanned ? undefined : handleBarCodeScanned}\n        barCodeScannerSettings={{\n          barCodeTypes: [BarCodeScanner.Constants.BarCodeType.qr],\n        }}\n      >\n        <View style={styles.overlay}>\n          {/* Header */}\n          <View style={styles.header}>\n            <FAB\n              style={styles.backButton}\n              icon=\"arrow-left\"\n              size=\"small\"\n              onPress={() => navigation.goBack()}\n              disabled={processing}\n            />\n            <View style={styles.headerCenter}>\n              <Text style={styles.headerTitle}>\n                {activeRental ? 'Return Battery' : 'Scan for Battery Swap'}\n              </Text>\n              <Text style={styles.headerSubtitle}>\n                {isOnline ? 'Online' : 'Offline Mode'}\n              </Text>\n            </View>\n            <FAB\n              style={styles.flashButton}\n              icon={flashOn ? 'flash-off' : 'flash-on'}\n              size=\"small\"\n              onPress={toggleFlash}\n              disabled={processing}\n            />\n          </View>\n\n          {/* Scanning Frame */}\n          <View style={styles.scanningFrame}>\n            <View style={styles.frame}>\n              <View style={[styles.corner, styles.topLeft]} />\n              <View style={[styles.corner, styles.topRight]} />\n              <View style={[styles.corner, styles.bottomLeft]} />\n              <View style={[styles.corner, styles.bottomRight]} />\n              \n              {processing && (\n                <View style={styles.processingOverlay}>\n                  <ActivityIndicator size=\"large\" color=\"white\" />\n                  <Text style={styles.processingText}>Processing...</Text>\n                </View>\n              )}\n            </View>\n          </View>\n\n          {/* Instructions */}\n          <View style={styles.instructions}>\n            <Text style={styles.instructionTitle}>\n              {activeRental ? 'Scan station QR to return battery' : 'Scan battery QR code to start rental'}\n            </Text>\n            <Text style={styles.instructionText}>\n              Position the QR code within the frame above\n            </Text>\n            \n            {!isOnline && (\n              <View style={styles.offlineWarning}>\n                <Icon name=\"wifi-off\" size={16} color={colors.warning} />\n                <Text style={styles.offlineText}>\n                  Offline mode: Actions will sync when connected\n                </Text>\n              </View>\n            )}\n          </View>\n\n          {/* Action Buttons */}\n          <View style={styles.actionButtons}>\n            {scanned && !processing && (\n              <Button\n                mode=\"outlined\"\n                onPress={resetScanner}\n                style={styles.actionButton}\n                labelStyle={styles.actionButtonLabel}\n              >\n                Scan Again\n              </Button>\n            )}\n            \n            <Button\n              mode=\"text\"\n              onPress={() => navigation.goBack()}\n              disabled={processing}\n              style={styles.actionButton}\n              labelStyle={styles.actionButtonLabel}\n            >\n              Cancel\n            </Button>\n          </View>\n        </View>\n      </Camera>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  camera: {\n    flex: 1,\n    width: '100%',\n  },\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingTop: spacing.xl,\n    paddingHorizontal: spacing.md,\n    paddingBottom: spacing.lg,\n  },\n  backButton: {\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\n  },\n  headerCenter: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  headerTitle: {\n    ...typography.h3,\n    color: 'white',\n    textAlign: 'center',\n  },\n  headerSubtitle: {\n    ...typography.caption,\n    color: 'rgba(255, 255, 255, 0.8)',\n    marginTop: spacing.xs,\n  },\n  flashButton: {\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\n  },\n  scanningFrame: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  frame: {\n    width: 250,\n    height: 250,\n    position: 'relative',\n  },\n  corner: {\n    position: 'absolute',\n    width: 30,\n    height: 30,\n    borderWidth: 4,\n    borderColor: 'white',\n  },\n  topLeft: {\n    top: 0,\n    left: 0,\n    borderRightWidth: 0,\n    borderBottomWidth: 0,\n  },\n  topRight: {\n    top: 0,\n    right: 0,\n    borderLeftWidth: 0,\n    borderBottomWidth: 0,\n  },\n  bottomLeft: {\n    bottom: 0,\n    left: 0,\n    borderRightWidth: 0,\n    borderTopWidth: 0,\n  },\n  bottomRight: {\n    bottom: 0,\n    right: 0,\n    borderLeftWidth: 0,\n    borderTopWidth: 0,\n  },\n  processingOverlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  processingText: {\n    ...typography.body,\n    color: 'white',\n    marginTop: spacing.md,\n  },\n  instructions: {\n    paddingHorizontal: spacing.xl,\n    paddingVertical: spacing.lg,\n    alignItems: 'center',\n  },\n  instructionTitle: {\n    ...typography.h3,\n    color: 'white',\n    textAlign: 'center',\n    marginBottom: spacing.sm,\n  },\n  instructionText: {\n    ...typography.body,\n    color: 'rgba(255, 255, 255, 0.8)',\n    textAlign: 'center',\n  },\n  offlineWarning: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginTop: spacing.md,\n    paddingHorizontal: spacing.md,\n    paddingVertical: spacing.sm,\n    backgroundColor: 'rgba(255, 152, 0, 0.2)',\n    borderRadius: 8,\n    gap: spacing.sm,\n  },\n  offlineText: {\n    ...typography.caption,\n    color: colors.warning,\n  },\n  actionButtons: {\n    paddingHorizontal: spacing.xl,\n    paddingBottom: spacing.xl,\n    gap: spacing.md,\n  },\n  actionButton: {\n    borderColor: 'white',\n  },\n  actionButtonLabel: {\n    color: 'white',\n  },\n  permissionText: {\n    ...typography.h3,\n    marginTop: spacing.lg,\n    marginBottom: spacing.sm,\n    textAlign: 'center',\n    color: colors.textSecondary,\n  },\n  permissionSubtext: {\n    ...typography.body,\n    textAlign: 'center',\n    color: colors.textSecondary,\n    marginBottom: spacing.xl,\n    paddingHorizontal: spacing.xl,\n  },\n  permissionButton: {\n    backgroundColor: colors.primary,\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}