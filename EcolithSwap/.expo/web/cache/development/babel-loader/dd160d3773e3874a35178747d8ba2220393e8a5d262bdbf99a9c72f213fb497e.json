{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Card, Chip, Searchbar, FAB } from 'react-native-paper';\nimport Icon from \"@expo/vector-icons/MaterialIcons\";\nimport { useData } from \"../contexts/DataContext\";\nimport { batteryService } from \"../services/batteryService\";\nimport { wasteService } from \"../services/wasteService\";\nimport { colors, typography, spacing } from \"../utils/theme\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function HistoryScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useData = useData(),\n    isOnline = _useData.isOnline;\n  var _useState = useState('all'),\n    _useState2 = _slicedToArray(_useState, 2),\n    activeTab = _useState2[0],\n    setActiveTab = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    searchQuery = _useState4[0],\n    setSearchQuery = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    rentalHistory = _useState6[0],\n    setRentalHistory = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    wasteHistory = _useState8[0],\n    setWasteHistory = _useState8[1];\n  var _useState9 = useState([]),\n    _useState0 = _slicedToArray(_useState9, 2),\n    combinedHistory = _useState0[0],\n    setCombinedHistory = _useState0[1];\n  var _useState1 = useState(false),\n    _useState10 = _slicedToArray(_useState1, 2),\n    loading = _useState10[0],\n    setLoading = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    refreshing = _useState12[0],\n    setRefreshing = _useState12[1];\n  useEffect(function () {\n    loadHistory();\n  }, []);\n  useEffect(function () {\n    combineAndFilterHistory();\n  }, [rentalHistory, wasteHistory, activeTab, searchQuery]);\n  var loadHistory = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        setLoading(true);\n        if (isOnline) {\n          var _yield$Promise$all = yield Promise.all([batteryService.getRentalHistory(50), wasteService.getWasteHistory(50)]),\n            _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 2),\n            rentals = _yield$Promise$all2[0],\n            waste = _yield$Promise$all2[1];\n          setRentalHistory(rentals);\n          setWasteHistory(waste);\n        }\n      } catch (error) {\n        console.error('Error loading history:', error);\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function loadHistory() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleRefresh = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      setRefreshing(true);\n      yield loadHistory();\n      setRefreshing(false);\n    });\n    return function handleRefresh() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var combineAndFilterHistory = function combineAndFilterHistory() {\n    var combined = [];\n    if (activeTab === 'all' || activeTab === 'swaps') {\n      var formattedRentals = rentalHistory.map(function (rental) {\n        var _rental$stations;\n        return _objectSpread(_objectSpread({}, rental), {}, {\n          type: 'rental',\n          date: rental.created_at,\n          title: `Battery Swap - ${(_rental$stations = rental.stations) == null ? void 0 : _rental$stations.name}`,\n          subtitle: `Battery ${rental.battery_id}`,\n          amount: rental.cost,\n          status: rental.is_active ? 'Active' : 'Completed'\n        });\n      });\n      combined = [].concat(_toConsumableArray(combined), _toConsumableArray(formattedRentals));\n    }\n    if (activeTab === 'all' || activeTab === 'waste') {\n      var formattedWaste = wasteHistory.map(function (waste) {\n        var _waste$stations;\n        return _objectSpread(_objectSpread({}, waste), {}, {\n          type: 'waste',\n          date: waste.logged_at,\n          title: `Plastic Waste - ${(_waste$stations = waste.stations) == null ? void 0 : _waste$stations.name}`,\n          subtitle: `${parseFloat(waste.weight_kg).toFixed(1)} kg`,\n          amount: waste.points_earned,\n          status: 'Completed'\n        });\n      });\n      combined = [].concat(_toConsumableArray(combined), _toConsumableArray(formattedWaste));\n    }\n    if (searchQuery) {\n      combined = combined.filter(function (item) {\n        return item.title.toLowerCase().includes(searchQuery.toLowerCase()) || item.subtitle.toLowerCase().includes(searchQuery.toLowerCase());\n      });\n    }\n    combined.sort(function (a, b) {\n      return new Date(b.date) - new Date(a.date);\n    });\n    setCombinedHistory(combined);\n  };\n  var formatDate = function formatDate(dateString) {\n    var date = new Date(dateString);\n    var now = new Date();\n    var diffTime = Math.abs(now - date);\n    var diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n    if (diffDays === 0) {\n      return date.toLocaleTimeString('en-KE', {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } else if (diffDays === 1) {\n      return 'Yesterday';\n    } else if (diffDays < 7) {\n      return `${diffDays} days ago`;\n    } else {\n      return date.toLocaleDateString('en-KE', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric'\n      });\n    }\n  };\n  var getItemIcon = function getItemIcon(type, status) {\n    if (type === 'rental') {\n      return status === 'Active' ? 'battery-charging-full' : 'battery-full';\n    }\n    return 'recycling';\n  };\n  var getItemColor = function getItemColor(type, status) {\n    if (type === 'rental') {\n      return status === 'Active' ? colors.warning : colors.primary;\n    }\n    return colors.success;\n  };\n  var getAmountDisplay = function getAmountDisplay(item) {\n    if (item.type === 'rental') {\n      return `KES ${item.amount || 0}`;\n    }\n    return `+${item.amount} pts`;\n  };\n  var renderHistoryItem = function renderHistoryItem(_ref4) {\n    var item = _ref4.item;\n    return _jsx(Card, {\n      style: styles.historyCard,\n      children: _jsx(TouchableOpacity, {\n        children: _jsxs(Card.Content, {\n          children: [_jsxs(View, {\n            style: styles.historyHeader,\n            children: [_jsx(View, {\n              style: styles.historyIcon,\n              children: _jsx(Icon, {\n                name: getItemIcon(item.type, item.status),\n                size: 24,\n                color: getItemColor(item.type, item.status)\n              })\n            }), _jsxs(View, {\n              style: styles.historyInfo,\n              children: [_jsx(Text, {\n                style: styles.historyTitle,\n                children: item.title\n              }), _jsx(Text, {\n                style: styles.historySubtitle,\n                children: item.subtitle\n              }), _jsx(Text, {\n                style: styles.historyDate,\n                children: formatDate(item.date)\n              })]\n            }), _jsxs(View, {\n              style: styles.historyAmount,\n              children: [_jsx(Text, {\n                style: [styles.amountText, {\n                  color: getItemColor(item.type, item.status)\n                }],\n                children: getAmountDisplay(item)\n              }), _jsx(Chip, {\n                mode: \"outlined\",\n                compact: true,\n                style: [styles.statusChip, {\n                  borderColor: getItemColor(item.type, item.status)\n                }],\n                children: item.status\n              })]\n            })]\n          }), item.type === 'rental' && item.start_time && item.end_time && _jsxs(View, {\n            style: styles.rentalDetails,\n            children: [_jsxs(View, {\n              style: styles.detailItem,\n              children: [_jsx(Text, {\n                style: styles.detailLabel,\n                children: \"Duration:\"\n              }), _jsxs(Text, {\n                style: styles.detailValue,\n                children: [Math.ceil((new Date(item.end_time) - new Date(item.start_time)) / (1000 * 60 * 60)), \" hours\"]\n              })]\n            }), item.payment_status && _jsxs(View, {\n              style: styles.detailItem,\n              children: [_jsx(Text, {\n                style: styles.detailLabel,\n                children: \"Payment:\"\n              }), _jsx(Text, {\n                style: [styles.detailValue, {\n                  color: item.payment_status === 'completed' ? colors.success : colors.warning\n                }],\n                children: item.payment_status.charAt(0).toUpperCase() + item.payment_status.slice(1)\n              })]\n            })]\n          })]\n        })\n      })\n    });\n  };\n  var renderTabButton = function renderTabButton(tab, label) {\n    return _jsx(TouchableOpacity, {\n      style: [styles.tabButton, activeTab === tab && styles.activeTabButton],\n      onPress: function onPress() {\n        return setActiveTab(tab);\n      },\n      children: _jsx(Text, {\n        style: [styles.tabText, activeTab === tab && styles.activeTabText],\n        children: label\n      })\n    });\n  };\n  var getEmptyMessage = function getEmptyMessage() {\n    if (!isOnline) {\n      return 'History not available offline. Connect to internet to view your history.';\n    }\n    switch (activeTab) {\n      case 'swaps':\n        return 'No battery swaps yet. Start by scanning a QR code at any station.';\n      case 'waste':\n        return 'No plastic waste logged yet. Visit a station to recycle plastic and earn points.';\n      default:\n        return 'No activity yet. Start using EcolithSwap to see your history here.';\n    }\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.header,\n      children: [_jsx(Text, {\n        style: styles.headerTitle,\n        children: \"Activity History\"\n      }), _jsx(Text, {\n        style: styles.headerSubtitle,\n        children: \"Track your battery swaps and plastic recycling\"\n      })]\n    }), _jsx(Searchbar, {\n      placeholder: \"Search history...\",\n      onChangeText: setSearchQuery,\n      value: searchQuery,\n      style: styles.searchBar\n    }), _jsxs(View, {\n      style: styles.tabContainer,\n      children: [renderTabButton('all', 'All'), renderTabButton('swaps', 'Battery Swaps'), renderTabButton('waste', 'Plastic Waste')]\n    }), _jsx(FlatList, {\n      data: combinedHistory,\n      renderItem: renderHistoryItem,\n      keyExtractor: function keyExtractor(item) {\n        return `${item.type}-${item.id}`;\n      },\n      style: styles.historyList,\n      contentContainerStyle: styles.listContent,\n      refreshControl: _jsx(RefreshControl, {\n        refreshing: refreshing,\n        onRefresh: handleRefresh\n      }),\n      ListEmptyComponent: _jsxs(View, {\n        style: styles.emptyContainer,\n        children: [_jsx(Icon, {\n          name: activeTab === 'swaps' ? 'battery-alert' : activeTab === 'waste' ? 'recycling' : 'history',\n          size: 64,\n          color: colors.textSecondary\n        }), _jsx(Text, {\n          style: styles.emptyTitle,\n          children: \"No History Found\"\n        }), _jsx(Text, {\n          style: styles.emptyText,\n          children: getEmptyMessage()\n        }), isOnline && _jsxs(View, {\n          style: styles.emptyActions,\n          children: [_jsxs(TouchableOpacity, {\n            style: styles.emptyAction,\n            onPress: function onPress() {\n              return navigation.navigate('HomeTab');\n            },\n            children: [_jsx(Icon, {\n              name: \"qr-code-scanner\",\n              size: 24,\n              color: colors.primary\n            }), _jsx(Text, {\n              style: styles.emptyActionText,\n              children: \"Start Swapping\"\n            })]\n          }), _jsxs(TouchableOpacity, {\n            style: styles.emptyAction,\n            onPress: function onPress() {\n              return navigation.navigate('WasteTab');\n            },\n            children: [_jsx(Icon, {\n              name: \"recycling\",\n              size: 24,\n              color: colors.success\n            }), _jsx(Text, {\n              style: styles.emptyActionText,\n              children: \"Log Waste\"\n            })]\n          })]\n        })]\n      }),\n      showsVerticalScrollIndicator: false\n    }), _jsx(FAB, {\n      style: styles.fab,\n      icon: \"add\",\n      onPress: function onPress() {\n        return navigation.navigate('HomeTab');\n      },\n      label: \"New Activity\"\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background\n  },\n  header: {\n    backgroundColor: colors.info,\n    padding: spacing.lg,\n    paddingTop: spacing.xl\n  },\n  headerTitle: _objectSpread(_objectSpread({}, typography.h2), {}, {\n    color: 'white',\n    marginBottom: spacing.xs\n  }),\n  headerSubtitle: _objectSpread(_objectSpread({}, typography.body), {}, {\n    color: 'rgba(255, 255, 255, 0.8)'\n  }),\n  searchBar: {\n    margin: spacing.md,\n    backgroundColor: colors.surface\n  },\n  tabContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: spacing.md,\n    marginBottom: spacing.sm\n  },\n  tabButton: {\n    flex: 1,\n    paddingVertical: spacing.md,\n    alignItems: 'center',\n    backgroundColor: colors.surface,\n    marginHorizontal: spacing.xs,\n    borderRadius: 8\n  },\n  activeTabButton: {\n    backgroundColor: colors.primary\n  },\n  tabText: _objectSpread(_objectSpread({}, typography.button), {}, {\n    color: colors.text\n  }),\n  activeTabText: {\n    color: 'white'\n  },\n  historyList: {\n    flex: 1\n  },\n  listContent: {\n    paddingHorizontal: spacing.md,\n    paddingBottom: spacing.xxl\n  },\n  historyCard: {\n    marginBottom: spacing.md,\n    backgroundColor: colors.surface\n  },\n  historyHeader: {\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  historyIcon: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: colors.background,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: spacing.md\n  },\n  historyInfo: {\n    flex: 1\n  },\n  historyTitle: _objectSpread(_objectSpread({}, typography.body), {}, {\n    fontWeight: '600',\n    marginBottom: spacing.xs\n  }),\n  historySubtitle: _objectSpread(_objectSpread({}, typography.caption), {}, {\n    color: colors.textSecondary,\n    marginBottom: spacing.xs\n  }),\n  historyDate: _objectSpread(_objectSpread({}, typography.caption), {}, {\n    color: colors.textSecondary\n  }),\n  historyAmount: {\n    alignItems: 'flex-end'\n  },\n  amountText: _objectSpread(_objectSpread({}, typography.body), {}, {\n    fontWeight: '600',\n    marginBottom: spacing.xs\n  }),\n  statusChip: {\n    height: 24\n  },\n  rentalDetails: {\n    marginTop: spacing.md,\n    paddingTop: spacing.md,\n    borderTopWidth: 1,\n    borderTopColor: colors.border\n  },\n  detailItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: spacing.xs\n  },\n  detailLabel: _objectSpread(_objectSpread({}, typography.caption), {}, {\n    color: colors.textSecondary\n  }),\n  detailValue: _objectSpread(_objectSpread({}, typography.caption), {}, {\n    fontWeight: '600'\n  }),\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: spacing.xxl,\n    paddingHorizontal: spacing.xl\n  },\n  emptyTitle: _objectSpread(_objectSpread({}, typography.h3), {}, {\n    marginTop: spacing.lg,\n    marginBottom: spacing.sm,\n    color: colors.textSecondary\n  }),\n  emptyText: _objectSpread(_objectSpread({}, typography.body), {}, {\n    textAlign: 'center',\n    color: colors.textSecondary,\n    lineHeight: 24,\n    marginBottom: spacing.xl\n  }),\n  emptyActions: {\n    flexDirection: 'row',\n    gap: spacing.lg\n  },\n  emptyAction: {\n    alignItems: 'center',\n    gap: spacing.sm\n  },\n  emptyActionText: _objectSpread(_objectSpread({}, typography.caption), {}, {\n    color: colors.primary\n  }),\n  fab: {\n    position: 'absolute',\n    margin: spacing.md,\n    right: 0,\n    bottom: spacing.xl,\n    backgroundColor: colors.primary\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","FlatList","RefreshControl","TouchableOpacity","Card","Chip","Searchbar","FAB","Icon","useData","batteryService","wasteService","colors","typography","spacing","jsx","_jsx","jsxs","_jsxs","HistoryScreen","_ref","navigation","_useData","isOnline","_useState","_useState2","_slicedToArray","activeTab","setActiveTab","_useState3","_useState4","searchQuery","setSearchQuery","_useState5","_useState6","rentalHistory","setRentalHistory","_useState7","_useState8","wasteHistory","setWasteHistory","_useState9","_useState0","combinedHistory","setCombinedHistory","_useState1","_useState10","loading","setLoading","_useState11","_useState12","refreshing","setRefreshing","loadHistory","combineAndFilterHistory","_ref2","_asyncToGenerator","_yield$Promise$all","Promise","all","getRentalHistory","getWasteHistory","_yield$Promise$all2","rentals","waste","error","console","apply","arguments","handleRefresh","_ref3","combined","formattedRentals","map","rental","_rental$stations","_objectSpread","type","date","created_at","title","stations","name","subtitle","battery_id","amount","cost","status","is_active","concat","_toConsumableArray","formattedWaste","_waste$stations","logged_at","parseFloat","weight_kg","toFixed","points_earned","filter","item","toLowerCase","includes","sort","a","b","Date","formatDate","dateString","now","diffTime","Math","abs","diffDays","floor","toLocaleTimeString","hour","minute","toLocaleDateString","month","day","year","getItemIcon","getItemColor","warning","primary","success","getAmountDisplay","renderHistoryItem","_ref4","style","styles","historyCard","children","Content","historyHeader","historyIcon","size","color","historyInfo","historyTitle","historySubtitle","historyDate","historyAmount","amountText","mode","compact","statusChip","borderColor","start_time","end_time","rentalDetails","detailItem","detailLabel","detailValue","ceil","payment_status","charAt","toUpperCase","slice","renderTabButton","tab","label","tabButton","activeTabButton","onPress","tabText","activeTabText","getEmptyMessage","container","header","headerTitle","headerSubtitle","placeholder","onChangeText","value","searchBar","tabContainer","data","renderItem","keyExtractor","id","historyList","contentContainerStyle","listContent","refreshControl","onRefresh","ListEmptyComponent","emptyContainer","textSecondary","emptyTitle","emptyText","emptyActions","emptyAction","navigate","emptyActionText","showsVerticalScrollIndicator","fab","icon","create","flex","backgroundColor","background","info","padding","lg","paddingTop","xl","h2","marginBottom","xs","body","margin","md","surface","flexDirection","paddingHorizontal","sm","paddingVertical","alignItems","marginHorizontal","borderRadius","button","text","paddingBottom","xxl","width","height","justifyContent","marginRight","fontWeight","caption","marginTop","borderTopWidth","borderTopColor","border","h3","textAlign","lineHeight","gap","position","right","bottom"],"sources":["C:/Users/User/Desktop/Ecolith Promps/V3/EcolithSwap/src/screens/HistoryScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  FlatList,\n  RefreshControl,\n  TouchableOpacity,\n} from 'react-native';\nimport { Card, Chip, Searchbar, FAB } from 'react-native-paper';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { useData } from '../contexts/DataContext';\nimport { batteryService } from '../services/batteryService';\nimport { wasteService } from '../services/wasteService';\nimport { colors, typography, spacing } from '../utils/theme';\n\nexport default function HistoryScreen({ navigation }) {\n  const { isOnline } = useData();\n  const [activeTab, setActiveTab] = useState('all'); // all, swaps, waste\n  const [searchQuery, setSearchQuery] = useState('');\n  const [rentalHistory, setRentalHistory] = useState([]);\n  const [wasteHistory, setWasteHistory] = useState([]);\n  const [combinedHistory, setCombinedHistory] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n\n  useEffect(() => {\n    loadHistory();\n  }, []);\n\n  useEffect(() => {\n    combineAndFilterHistory();\n  }, [rentalHistory, wasteHistory, activeTab, searchQuery]);\n\n  const loadHistory = async () => {\n    try {\n      setLoading(true);\n      if (isOnline) {\n        const [rentals, waste] = await Promise.all([\n          batteryService.getRentalHistory(50),\n          wasteService.getWasteHistory(50),\n        ]);\n        setRentalHistory(rentals);\n        setWasteHistory(waste);\n      }\n    } catch (error) {\n      console.error('Error loading history:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRefresh = async () => {\n    setRefreshing(true);\n    await loadHistory();\n    setRefreshing(false);\n  };\n\n  const combineAndFilterHistory = () => {\n    let combined = [];\n\n    // Add rental history\n    if (activeTab === 'all' || activeTab === 'swaps') {\n      const formattedRentals = rentalHistory.map(rental => ({\n        ...rental,\n        type: 'rental',\n        date: rental.created_at,\n        title: `Battery Swap - ${rental.stations?.name}`,\n        subtitle: `Battery ${rental.battery_id}`,\n        amount: rental.cost,\n        status: rental.is_active ? 'Active' : 'Completed',\n      }));\n      combined = [...combined, ...formattedRentals];\n    }\n\n    // Add waste history\n    if (activeTab === 'all' || activeTab === 'waste') {\n      const formattedWaste = wasteHistory.map(waste => ({\n        ...waste,\n        type: 'waste',\n        date: waste.logged_at,\n        title: `Plastic Waste - ${waste.stations?.name}`,\n        subtitle: `${parseFloat(waste.weight_kg).toFixed(1)} kg`,\n        amount: waste.points_earned,\n        status: 'Completed',\n      }));\n      combined = [...combined, ...formattedWaste];\n    }\n\n    // Filter by search query\n    if (searchQuery) {\n      combined = combined.filter(item =>\n        item.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        item.subtitle.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n    }\n\n    // Sort by date (newest first)\n    combined.sort((a, b) => new Date(b.date) - new Date(a.date));\n\n    setCombinedHistory(combined);\n  };\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffTime = Math.abs(now - date);\n    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n\n    if (diffDays === 0) {\n      return date.toLocaleTimeString('en-KE', { \n        hour: '2-digit', \n        minute: '2-digit' \n      });\n    } else if (diffDays === 1) {\n      return 'Yesterday';\n    } else if (diffDays < 7) {\n      return `${diffDays} days ago`;\n    } else {\n      return date.toLocaleDateString('en-KE', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric',\n      });\n    }\n  };\n\n  const getItemIcon = (type, status) => {\n    if (type === 'rental') {\n      return status === 'Active' ? 'battery-charging-full' : 'battery-full';\n    }\n    return 'recycling';\n  };\n\n  const getItemColor = (type, status) => {\n    if (type === 'rental') {\n      return status === 'Active' ? colors.warning : colors.primary;\n    }\n    return colors.success;\n  };\n\n  const getAmountDisplay = (item) => {\n    if (item.type === 'rental') {\n      return `KES ${item.amount || 0}`;\n    }\n    return `+${item.amount} pts`;\n  };\n\n  const renderHistoryItem = ({ item }) => (\n    <Card style={styles.historyCard}>\n      <TouchableOpacity>\n        <Card.Content>\n          <View style={styles.historyHeader}>\n            <View style={styles.historyIcon}>\n              <Icon\n                name={getItemIcon(item.type, item.status)}\n                size={24}\n                color={getItemColor(item.type, item.status)}\n              />\n            </View>\n            \n            <View style={styles.historyInfo}>\n              <Text style={styles.historyTitle}>{item.title}</Text>\n              <Text style={styles.historySubtitle}>{item.subtitle}</Text>\n              <Text style={styles.historyDate}>{formatDate(item.date)}</Text>\n            </View>\n\n            <View style={styles.historyAmount}>\n              <Text style={[\n                styles.amountText,\n                { color: getItemColor(item.type, item.status) }\n              ]}>\n                {getAmountDisplay(item)}\n              </Text>\n              \n              <Chip\n                mode=\"outlined\"\n                compact\n                style={[\n                  styles.statusChip,\n                  { borderColor: getItemColor(item.type, item.status) }\n                ]}\n              >\n                {item.status}\n              </Chip>\n            </View>\n          </View>\n\n          {/* Additional Details */}\n          {item.type === 'rental' && item.start_time && item.end_time && (\n            <View style={styles.rentalDetails}>\n              <View style={styles.detailItem}>\n                <Text style={styles.detailLabel}>Duration:</Text>\n                <Text style={styles.detailValue}>\n                  {Math.ceil((new Date(item.end_time) - new Date(item.start_time)) / (1000 * 60 * 60))} hours\n                </Text>\n              </View>\n              {item.payment_status && (\n                <View style={styles.detailItem}>\n                  <Text style={styles.detailLabel}>Payment:</Text>\n                  <Text style={[\n                    styles.detailValue,\n                    { color: item.payment_status === 'completed' ? colors.success : colors.warning }\n                  ]}>\n                    {item.payment_status.charAt(0).toUpperCase() + item.payment_status.slice(1)}\n                  </Text>\n                </View>\n              )}\n            </View>\n          )}\n        </Card.Content>\n      </TouchableOpacity>\n    </Card>\n  );\n\n  const renderTabButton = (tab, label) => (\n    <TouchableOpacity\n      style={[\n        styles.tabButton,\n        activeTab === tab && styles.activeTabButton\n      ]}\n      onPress={() => setActiveTab(tab)}\n    >\n      <Text style={[\n        styles.tabText,\n        activeTab === tab && styles.activeTabText\n      ]}>\n        {label}\n      </Text>\n    </TouchableOpacity>\n  );\n\n  const getEmptyMessage = () => {\n    if (!isOnline) {\n      return 'History not available offline. Connect to internet to view your history.';\n    }\n    \n    switch (activeTab) {\n      case 'swaps':\n        return 'No battery swaps yet. Start by scanning a QR code at any station.';\n      case 'waste':\n        return 'No plastic waste logged yet. Visit a station to recycle plastic and earn points.';\n      default:\n        return 'No activity yet. Start using EcolithSwap to see your history here.';\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      {/* Header */}\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Activity History</Text>\n        <Text style={styles.headerSubtitle}>\n          Track your battery swaps and plastic recycling\n        </Text>\n      </View>\n\n      {/* Search Bar */}\n      <Searchbar\n        placeholder=\"Search history...\"\n        onChangeText={setSearchQuery}\n        value={searchQuery}\n        style={styles.searchBar}\n      />\n\n      {/* Tab Navigation */}\n      <View style={styles.tabContainer}>\n        {renderTabButton('all', 'All')}\n        {renderTabButton('swaps', 'Battery Swaps')}\n        {renderTabButton('waste', 'Plastic Waste')}\n      </View>\n\n      {/* History List */}\n      <FlatList\n        data={combinedHistory}\n        renderItem={renderHistoryItem}\n        keyExtractor={(item) => `${item.type}-${item.id}`}\n        style={styles.historyList}\n        contentContainerStyle={styles.listContent}\n        refreshControl={\n          <RefreshControl refreshing={refreshing} onRefresh={handleRefresh} />\n        }\n        ListEmptyComponent={\n          <View style={styles.emptyContainer}>\n            <Icon\n              name={activeTab === 'swaps' ? 'battery-alert' : activeTab === 'waste' ? 'recycling' : 'history'}\n              size={64}\n              color={colors.textSecondary}\n            />\n            <Text style={styles.emptyTitle}>No History Found</Text>\n            <Text style={styles.emptyText}>{getEmptyMessage()}</Text>\n            \n            {isOnline && (\n              <View style={styles.emptyActions}>\n                <TouchableOpacity\n                  style={styles.emptyAction}\n                  onPress={() => navigation.navigate('HomeTab')}\n                >\n                  <Icon name=\"qr-code-scanner\" size={24} color={colors.primary} />\n                  <Text style={styles.emptyActionText}>Start Swapping</Text>\n                </TouchableOpacity>\n                \n                <TouchableOpacity\n                  style={styles.emptyAction}\n                  onPress={() => navigation.navigate('WasteTab')}\n                >\n                  <Icon name=\"recycling\" size={24} color={colors.success} />\n                  <Text style={styles.emptyActionText}>Log Waste</Text>\n                </TouchableOpacity>\n              </View>\n            )}\n          </View>\n        }\n        showsVerticalScrollIndicator={false}\n      />\n\n      {/* Quick Action FAB */}\n      <FAB\n        style={styles.fab}\n        icon=\"add\"\n        onPress={() => navigation.navigate('HomeTab')}\n        label=\"New Activity\"\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  header: {\n    backgroundColor: colors.info,\n    padding: spacing.lg,\n    paddingTop: spacing.xl,\n  },\n  headerTitle: {\n    ...typography.h2,\n    color: 'white',\n    marginBottom: spacing.xs,\n  },\n  headerSubtitle: {\n    ...typography.body,\n    color: 'rgba(255, 255, 255, 0.8)',\n  },\n  searchBar: {\n    margin: spacing.md,\n    backgroundColor: colors.surface,\n  },\n  tabContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: spacing.md,\n    marginBottom: spacing.sm,\n  },\n  tabButton: {\n    flex: 1,\n    paddingVertical: spacing.md,\n    alignItems: 'center',\n    backgroundColor: colors.surface,\n    marginHorizontal: spacing.xs,\n    borderRadius: 8,\n  },\n  activeTabButton: {\n    backgroundColor: colors.primary,\n  },\n  tabText: {\n    ...typography.button,\n    color: colors.text,\n  },\n  activeTabText: {\n    color: 'white',\n  },\n  historyList: {\n    flex: 1,\n  },\n  listContent: {\n    paddingHorizontal: spacing.md,\n    paddingBottom: spacing.xxl,\n  },\n  historyCard: {\n    marginBottom: spacing.md,\n    backgroundColor: colors.surface,\n  },\n  historyHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  historyIcon: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: colors.background,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: spacing.md,\n  },\n  historyInfo: {\n    flex: 1,\n  },\n  historyTitle: {\n    ...typography.body,\n    fontWeight: '600',\n    marginBottom: spacing.xs,\n  },\n  historySubtitle: {\n    ...typography.caption,\n    color: colors.textSecondary,\n    marginBottom: spacing.xs,\n  },\n  historyDate: {\n    ...typography.caption,\n    color: colors.textSecondary,\n  },\n  historyAmount: {\n    alignItems: 'flex-end',\n  },\n  amountText: {\n    ...typography.body,\n    fontWeight: '600',\n    marginBottom: spacing.xs,\n  },\n  statusChip: {\n    height: 24,\n  },\n  rentalDetails: {\n    marginTop: spacing.md,\n    paddingTop: spacing.md,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  detailItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: spacing.xs,\n  },\n  detailLabel: {\n    ...typography.caption,\n    color: colors.textSecondary,\n  },\n  detailValue: {\n    ...typography.caption,\n    fontWeight: '600',\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: spacing.xxl,\n    paddingHorizontal: spacing.xl,\n  },\n  emptyTitle: {\n    ...typography.h3,\n    marginTop: spacing.lg,\n    marginBottom: spacing.sm,\n    color: colors.textSecondary,\n  },\n  emptyText: {\n    ...typography.body,\n    textAlign: 'center',\n    color: colors.textSecondary,\n    lineHeight: 24,\n    marginBottom: spacing.xl,\n  },\n  emptyActions: {\n    flexDirection: 'row',\n    gap: spacing.lg,\n  },\n  emptyAction: {\n    alignItems: 'center',\n    gap: spacing.sm,\n  },\n  emptyActionText: {\n    ...typography.caption,\n    color: colors.primary,\n  },\n  fab: {\n    position: 'absolute',\n    margin: spacing.md,\n    right: 0,\n    bottom: spacing.xl,\n    backgroundColor: colors.primary,\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}